<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">

<polymer-element name='app-button' attributes=''>
  <template>
    <link rel='stylesheet' href='../fb-button.css'>

    <app-globals id="globals"></app-globals>

    <paper-button raised class='colored' on-click='{{appAction}}'><content id='content'></content></paper-button>
  </template>
  <script>
    (function () {
      var fb = null;

      Polymer({

        dest: 'MainActivity',
        before: null,
        after: null,

        ready: function() {
          var that = this;
          this.$.globals.setCurrentListener('appAction', function(){
            fb = new Firebase('https://hcrkubi.firebaseio.com/' + that.$.globals.data.current + '/appAction');
          });
        },

        appAction: function() {
          console.log('App Action');

          fb.push().set({
            destination: this.dest,
            before: this.before,
            after: this.after,
            handled: false
          });
        }
      });
    })();
  </script>
</polymer-element>
