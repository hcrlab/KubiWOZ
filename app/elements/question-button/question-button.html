<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">

<polymer-element name="question-button" attributes="text lan expr action btns">
  <template>
    <link rel="stylesheet" href="../fb-button.css">

    <paper-button raised class="colored" on-click="{{question}}"><content id="content"></content></paper-button>
  </template>
  <script>
    (function () {
      var fb = new Firebase("https://hcrkubi.firebaseio.com/question");

      Polymer({

        text: null,
        lan: "EN",
        expr: null,
        action: null,

        created: function() {
          this.btns = [];
        },

        question: function() {
          console.log("Question");

          if(!this.text) {
            this.text = this.$.content.getDistributedNodes()[0].data;
          }

          fb.push().set({
            tasks: [{
              speech: {
                text: this.text,
                language: this.lan
              },
              expr: this.expr,
              action: this.action,
              buttons: this.btns
            }],
            handled: false
          });
        }
      });
    })();
  </script>
</polymer-element>
